{% extends "base.html" %}

{% block scripts %}
{{ super() }}
<script>
  window.MathJax = {
    tex: {
      inlineMath: [["\\(", "\\)"], ["$", "$"]],
      displayMath: [["\\[", "\\]"], ["$$", "$$"]],
      processEscapes: true,
      processEnvironments: true
    },
    options: {
      ignoreHtmlClass: ".*|",
      processHtmlClass: "arithmatex"
    }
  };

  document$.subscribe(() => {
    MathJax.typesetPromise()
  })
</script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
{% endblock %}

{% block disqus %}
<script
  src="https://giscus.app/client.js"
  data-repo="bjut-swift/BJUT-Helper"
  data-repo-id="R_kgDOJpSHHA"
  data-category="Announcements"
  data-category-id="DIC_kwDOJpSHHM4CYHdU"
  data-mapping="title"
  data-strict="0"
  data-reactions-enabled="1"
  data-emit-metadata="0"
  data-input-position="bottom"
  data-theme="light_high_contrast"
  data-lang="zh-CN"
  data-loading="lazy"
  crossorigin="anonymous"
  async
></script>
<script>
  var palette = __get('__palette');
  if (palette && typeof palette.color === 'object') {
    if (palette.color.scheme === 'slate') {
      const giscus = document.querySelector('script[src*=giscus]');
      giscus.setAttribute('data-theme', 'dark_protanopia');
    }
  }

  document.addEventListener('DOMContentLoaded', function () {
    const ref = document.querySelector('[data-md-component=palette]');
    ref.addEventListener('change', function () {
      var palette = __get('__palette');
      if (palette && typeof palette.color === 'object') {
        const theme =
          palette.color.scheme === 'slate'
            ? 'dark_protanopia'
            : 'light_protanopia';
        const frame = document.querySelector('.giscus-frame');
        frame.contentWindow.postMessage(
          {
            giscus: { setConfig: { theme } },
          },
          'https://giscus.app'
        );
      }
    });
  });
</script>
{% endblock %}
