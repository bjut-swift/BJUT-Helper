## **`fgets()` å‡½æ•°æ€»ç»“**

### **1. `fgets()` çš„åŸºæœ¬ç”¨æ³•**
`fgets()` ç”¨äº **ä»æ ‡å‡†è¾“å…¥ (`stdin`) æˆ–æ–‡ä»¶è¯»å–å­—ç¬¦ä¸²**ï¼Œå¹¶ç¡®ä¿ä¸ä¼šè¶…å‡ºç¼“å†²åŒºå¤§å°ã€‚  
```c
char *fgets(char *str, int size, FILE *stream);
```
- `str`ï¼šç›®æ ‡å­—ç¬¦æ•°ç»„ï¼ˆå­˜å‚¨è¾“å…¥çš„å­—ç¬¦ä¸²ï¼‰ã€‚
- `size`ï¼š**æœ€å¤šè¯»å– `size-1` ä¸ªå­—ç¬¦**ï¼Œæœ€åè‡ªåŠ¨åŠ  `\0` ç»ˆæ­¢ç¬¦ã€‚
- `stream`ï¼šè¾“å…¥æµï¼Œé€šå¸¸ä¸º `stdin`ï¼ˆæ ‡å‡†è¾“å…¥ï¼‰ã€‚

---

### **2. `fgets()` è¯»å–ç”¨æˆ·è¾“å…¥**
```c
#include <stdio.h>

int main() {
    char str[50];  // å®šä¹‰å­—ç¬¦æ•°ç»„

    printf("è¯·è¾“å…¥ä¸€å¥è¯: ");
    fgets(str, sizeof(str), stdin);  // è¯»å–è¾“å…¥

    printf("ä½ è¾“å…¥çš„æ˜¯: %s", str);  // è¾“å‡ºå­—ç¬¦ä¸²
    return 0;
}
```
#### **ç¤ºä¾‹è¾“å…¥**
```
Hello, C programming!
```
#### **ç¤ºä¾‹è¾“å‡º**
```
ä½ è¾“å…¥çš„æ˜¯: Hello, C programming!
```
> **æ³¨æ„**ï¼š`fgets()` **ä¼šä¿ç•™æ¢è¡Œç¬¦ `\n`**ï¼ˆå¦‚æœç¼“å†²åŒºè¶³å¤Ÿå¤§ï¼‰ã€‚

---

### **3. `fgets()` çš„æ¢è¡Œç¬¦é—®é¢˜**
å¦‚æœè¾“å…¥å†…å®¹ä¸è¶³ `size-1`ï¼Œä¸”æŒ‰ä¸‹ `Enter`ï¼Œ`fgets()` **ä¼šå°† `\n` å­˜å…¥ `str`**ï¼š
```c
#include <stdio.h>

int main() {
    char str[10];

    printf("è¯·è¾“å…¥: ");
    fgets(str, sizeof(str), stdin);

    printf("ä½ è¾“å…¥çš„æ˜¯: %s", str);  // å¯èƒ½åŒ…å«æ¢è¡Œç¬¦
    return 0;
}
```
#### **ç¤ºä¾‹è¾“å…¥**
```
Hello
```
#### **ç¤ºä¾‹è¾“å‡º**
```
ä½ è¾“å…¥çš„æ˜¯: Hello
ï¼ˆå…‰æ ‡æ¢è¡Œï¼‰
```
> ç”±äº `Hello` åªæœ‰ 5 ä¸ªå­—ç¬¦ï¼Œ`\n` ä¹Ÿè¢«å­˜å…¥ `str`ï¼Œæ‰€ä»¥è¾“å‡ºåæ¢è¡Œã€‚

#### **å»é™¤æ¢è¡Œç¬¦**
```c
#include <stdio.h>
#include <string.h>

int main() {
    char str[50];

    printf("è¯·è¾“å…¥: ");
    fgets(str, sizeof(str), stdin);

    // æŸ¥æ‰¾æ¢è¡Œç¬¦å¹¶æ›¿æ¢ä¸ºå­—ç¬¦ä¸²ç»“æŸç¬¦
    str[strcspn(str, "\n")] = '\0';

    printf("ä½ è¾“å…¥çš„æ˜¯: %s", str);
    return 0;
}
```

---

### **4. `sizeof(str)` åœ¨ `fgets()` ä¸­çš„ä½œç”¨**
```c
char str[50];
fgets(str, sizeof(str), stdin);  // ç¡®ä¿ä¸ä¼šè¶…å‡º 50 å­—èŠ‚
```
âœ… **ä¼˜ç‚¹**ï¼š
- é¿å… **ç¼“å†²åŒºæº¢å‡º**ï¼Œå®‰å…¨è¯»å–è¾“å…¥ã€‚
- **å¯ç»´æŠ¤æ€§é«˜**ï¼Œæ•°ç»„å¤§å°å˜åŒ–æ—¶æ— éœ€ä¿®æ”¹ä»£ç ã€‚

âš ï¸ **é”™è¯¯ç¤ºä¾‹ï¼ˆä¸é€‚ç”¨äºæŒ‡é’ˆï¼‰**
```c
char *str;
fgets(str, sizeof(str), stdin);  // âŒ é”™è¯¯ï¼Œstr æ˜¯æŒ‡é’ˆï¼Œsizeof(str) åªæ˜¯æŒ‡é’ˆå¤§å°ï¼
```
æ­£ç¡®åšæ³•ï¼š
```c
char str[50];  // ä½¿ç”¨å­—ç¬¦æ•°ç»„
fgets(str, sizeof(str), stdin);
```

---

### **5. `fgets()` vs `scanf()`**
| **å‡½æ•°**   | **ç‰¹ç‚¹** | **èƒ½å¦è¯»å–ç©ºæ ¼** | **å®‰å…¨æ€§** |
|------------|---------|----------------|------------|
| `scanf()`  | è¯»å–å•è¯ï¼Œé‡åˆ°ç©ºæ ¼åœæ­¢ | âŒ å¦ | å¯èƒ½å¯¼è‡´ç¼“å†²åŒºæº¢å‡º |
| `fgets()`  | è¯»å–æ•´è¡Œï¼ŒåŒ…æ‹¬ç©ºæ ¼ | âœ… æ˜¯ | **å®‰å…¨ï¼ˆé™åˆ¶æœ€å¤§é•¿åº¦ï¼‰** |

#### **å¯¹æ¯”ç¤ºä¾‹**
```c
#include <stdio.h>

int main() {
    char name1[20], name2[20];

    printf("ä½¿ç”¨ scanf è¯·è¾“å…¥å§“å: ");
    scanf("%s", name1);  // ä¸èƒ½è¯»å–ç©ºæ ¼ï¼Œé‡åˆ°ç©ºæ ¼åœæ­¢

    getchar();  // æ¸…é™¤ç¼“å†²åŒºä¸­çš„ `\n`

    printf("ä½¿ç”¨ fgets è¯·è¾“å…¥å§“å: ");
    fgets(name2, sizeof(name2), stdin);  // èƒ½è¯»å–ç©ºæ ¼

    printf("scanf è¾“å…¥: %s\n", name1);
    printf("fgets è¾“å…¥: %s", name2);  // å¯èƒ½åŒ…å«æ¢è¡Œç¬¦
    return 0;
}
```
#### **ç¤ºä¾‹è¾“å…¥**
```
ä½¿ç”¨ scanf è¯·è¾“å…¥å§“å: John Doe
ä½¿ç”¨ fgets è¯·è¾“å…¥å§“å: Alice Smith
```
#### **ç¤ºä¾‹è¾“å‡º**
```
scanf è¾“å…¥: John
fgets è¾“å…¥: Alice Smith
```
> `scanf()` **é‡åˆ°ç©ºæ ¼åœæ­¢**ï¼Œ`fgets()` **èƒ½è¯»å–æ•´è¡Œ**ã€‚

---

### **6. `fgets()` è¯»å–æ–‡ä»¶**
```c
#include <stdio.h>

int main() {
    FILE *fp = fopen("test.txt", "r");  // ä»¥åªè¯»æ¨¡å¼æ‰“å¼€æ–‡ä»¶
    if (fp == NULL) {
        printf("æ–‡ä»¶æ‰“å¼€å¤±è´¥\n");
        return 1;
    }

    char line[100];
    while (fgets(line, sizeof(line), fp)) {  // é€è¡Œè¯»å–
        printf("%s", line);
    }

    fclose(fp);
    return 0;
}
```

---

### **7. æ€»ç»“**
âœ… **æ¨èä½¿ç”¨ `fgets()` è¯»å–å­—ç¬¦ä¸²**ï¼Œå› ä¸ºï¼š
- **å¯ä»¥è¯»å–æ•´è¡Œï¼Œæ”¯æŒç©ºæ ¼**
- **å®‰å…¨ï¼ˆé™åˆ¶æœ€å¤§é•¿åº¦ï¼Œé˜²æ­¢ç¼“å†²åŒºæº¢å‡ºï¼‰**
- **é€‚ç”¨äºæ ‡å‡†è¾“å…¥ `stdin` å’Œæ–‡ä»¶**

ğŸš€ **æœ€ä½³å®è·µ**
```c
fgets(str, sizeof(str), stdin);
str[strcspn(str, "\n")] = '\0';  // å»æ‰æ¢è¡Œç¬¦
```
è¿™æ ·ä»£ç æ—¢ **å®‰å…¨**ï¼Œåˆ **æ˜“ç»´æŠ¤**ï¼ğŸ¯